package util

import (
	"fmt"
	"strings"
	"testing"
)

func TestAppendBytes(t *testing.T) {
	str1024 := `
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
`
	str := `abcd`

	s1 := strings.NewReader(str1024)
	x1, _ := AppendBytes(s1, nil)
	s1 = strings.NewReader(str1024)
	p1 := make([]byte, 0)
	AppendBytes(s1, &p1)

	s2 := strings.NewReader(str)
	x2, _ := AppendBytes(s2, nil)
	s2 = strings.NewReader(str)
	p2 := make([]byte, 0)
	AppendBytes(s2, &p2)

	fmt.Println(x1)
	fmt.Println(x2)
}
